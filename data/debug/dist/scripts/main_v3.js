"use strict";var apiList=['{ "msg": "" }','{ "msg": "login", "msg_id": "1234", "data": { "cn_user": "USERNAME", "cn_pass": "PASSWORD" } }','{ "msg": "get_home", "msg_id": "1234" }','{ "msg": "get_state", "msg_id": "1234", "data": { "items": ["input_0", "output_0"] } }','{ "msg": "get_states", "msg_id": "1234", "data": { "id": "input_0" } }','{ "msg": "query", "msg_id": "1234", "data": { "id": "input_0", "param": "input_sources" } }','{ "msg": "get_param", "msg_id": "1234", "data": { "id": "input_0", "param": "name" } }','{ "msg": "set_param", "msg_id": "1234", "data": { "id": "input_0", "param": "name", "value": "New name" } }','{ "msg": "del_param", "msg_id": "1234", "data": { "id": "input_0", "param": "param_to_delete" } }','{ "msg": "get_timerange", "msg_id": "1234", "data": { "id": "input_0" } }','{ "msg": "set_timerange", "msg_id": "1234", "data": { "id": "input_0", "months": "000000000000", "ranges": [ { "day": "1", "start_hour": "12", "start_min": "0", "start_sec": "0", "start_type": "0", "start_offset": "1", "end_hour": "13", "end_min": "30", "end_sec": "0", "end_type": "0", "end_offset": "1" } ] } }','{ "msg": "set_state", "msg_id": "1234", "data": { "id": "output_0", "value": "true" } }','{ "msg": "autoscenario", "msg_id": "1234", "data": { "type": "list" } }','{ "msg": "autoscenario", "msg_id": "1234", "data": { "type": "get", "id": "input_0" } }','{ "msg": "autoscenario", "msg_id": "1234", "data": { "type": "create", "name": "New scenario", "visible": "true", "room_name": "Room", "room_type": "bedroom", "cycle": "true", "steps": [ { "step_pause": "61000", "step_type": "standard", "actions": [ { "id": "output_0", "action": "true"}, { "id": "output_1", "action": "set 50" } ] }, { "step_type": "end", "actions": [ { "id": "output_0", "action": "false" } ] } ] } }','{ "msg": "autoscenario", "msg_id": "1234", "data": { "type": "delete", "id": "input_0" } }','{ "msg": "autoscenario", "msg_id": "1234", "data": { "type": "modify", "id": "input_0", "name": "scenario modified", "visible": "true", "room_name": "Room", "room_type": "bedroom", "cycle": "true", "steps": [ { "step_pause": "61000", "step_type": "standard", "actions": [ { "id": "output_0", "action": "true"}, { "id": "output_1", "action": "set 50" } ] }, { "step_type": "end", "actions": [ { "id": "output_0", "action": "false" } ] } ] } }','{ "msg": "autoscenario", "msg_id": "1234", "data": { "type": "add_schedule", "id": "input_0" } }','{ "msg": "autoscenario", "msg_id": "1234", "data": { "type": "del_schedule", "id": "input_0" } }','{ "msg": "get_playlist", "msg_id": "1234", "data": { "id": "output_0" } }','{ "msg": "get_io", "msg_id": "1234", "data": { "items": ["input_0", "output_0"] } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_stats", "id": "output_0" } }','{ "msg": "audio", "msg_id": "1234", "data": { "audio_action": "get_playlist_size", "id": "output_0" } }','{ "msg": "audio", "msg_id": "1234", "data": { "audio_action": "get_time", "id": "output_0" } }','{ "msg": "audio", "msg_id": "1234", "data": { "audio_action": "get_playlist_item", "item": "0", "id": "output_0" } }','{ "msg": "audio", "msg_id": "1234", "data": { "audio_action": "get_cover_url", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_albums", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_artists", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_years", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_genres", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_playlists", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_music_folder", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_search", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_radios", "from": "0", "count": "1", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_radio_items", "from": "0", "count": "1", "radio_id": "0", "item_id": "1", "search": "", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_artist_album", "from": "0", "count": "1", "artist_id": "0", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_year_albums", "from": "0", "count": "1", "year": "0", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_genre_artists", "from": "0", "count": "1", "genre": "0", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_album_titles", "from": "0", "count": "1", "album_id": "0", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_playlist_titles", "from": "0", "count": "1", "playlist_id": "0", "id": "output_0" } }','{ "msg": "audio_db", "msg_id": "1234", "data": { "audio_action": "get_track_infos", "from": "0", "count": "1", "track_id": "0", "id": "output_0" } }','{ "msg": "eventlog", "msg_id": "1234", "data": { "page": 0, "per_page": 100, "uuid": "<uuid for single event>" } }'];function popuplateApiList(){var t=0;$("#api_list").append($("<option />").val(t++).html("Custom request"));for(var a=1;a<apiList.length;a++){var i=JSON.parse(apiList[a]).msg;"autoscenario"==i&&(i=i+" "+JSON.parse(apiList[a]).data.type),"audio"!=i&&"audio_db"!=i||(i=i+" "+JSON.parse(apiList[a]).data.audio_action),$("#api_list").append($("<option />").val(t++).html(i))}$("#api_list").change(function(){var t=$("#api_list option:selected").val(),a=apiList[parseInt(t)];""!=$("#username").val()&&(a=a.replace("USERNAME",$("#username").val())),""!=$("#passwd").val()&&(a=a.replace("PASSWORD",$("#passwd").val()));var i=JSON.stringify(JSON.parse(a),null,"    ");window.editor&&"function"==typeof window.editor.setValue?window.editor.setValue(i):$("#message").val(i)}),$("#api_list").change()}var ws=new Object,loginfos=[];function addLog(t,a){a=void 0!==a&&a;var i=loginfos.length,o=$("<p></p>");loginfos.push(t),$(".log").append(o);var s="",e="";"connected"==t.type?(s="‚úîÔ∏è ",e="Connected"):"disconnected"==t.type?(s="‚úñÔ∏è ",e="Disconnected"):"error"==t.type?(s="‚ö†Ô∏è ",e="Error"):"event"===t.type?(s="üîî ",e="Event"):a?(s="‚û°Ô∏è ",e=t.type||'Empty "msg"'):(s="‚¨ÖÔ∏è ",e=t.type||'Empty "msg"'),o.text(s+e),$("#badge_count").html(loginfos.length),o.on("click",function(){var t,a=loginfos[i];try{t=JSON.stringify(JSON.parse(a.json),null,4)}catch(i){t=a.json}$("#answer").text(t),$("pre code").each(function(t,a){hljs.highlightElement(a)})})}function clearLog(){loginfos=[],$(".log").html(""),$("#badge_count").html("0")}$(document).ready(function(){popuplateApiList(),$("#urlinput").val("ws://"+window.location.host+"/api"),$("#btdisconnect").on("click",function(){ws.close()}),$("#btsend").on("click",function(){var t=window.editor&&"function"==typeof window.editor.getValue?window.editor.getValue():$("#message").val();if(!("readyState"in ws)||ws.readyState!=ws.OPEN)return console.log("sending error"),void addLog({type:"error",msg_id:"",json:"Websocket connection closed"});ws.send(t);var a=JSON.parse(t),i="",o="UNKNOWN!!";a.hasOwnProperty("msg_id")&&(i=a.msg_id),a.hasOwnProperty("msg")&&(o=a.msg),addLog({type:o,msg_id:i,json:t},!0)}),$("#btclear").on("click",function(){clearLog()}),$("#btconnect").on("click",function(){(ws=new WebSocket($("#urlinput").val())).onopen=function(t){$("#status_con").removeClass("bg-danger"),$("#status_con").addClass("bg-success"),$("#status_con").html("Connected"),addLog({type:"connected",msg_id:"",json:"OPEN"})},ws.onclose=function(t){$("#status_con").removeClass("bg-success"),$("#status_con").addClass("bg-danger"),$("#status_con").html("Disconnected"),addLog({type:"disconnected",msg_id:"",json:"CLOSED"})},ws.onmessage=function(t){console.log(t.data);var a=JSON.parse(t.data),i="",o="UNKNOWN!!";a.hasOwnProperty("msg_id")&&(i=a.msg_id),a.hasOwnProperty("msg")&&(o=a.msg),addLog({type:o,msg_id:i,json:t.data})},ws.onerror=function(t){$("#status_con").removeClass("bg-success"),$("#status_con").addClass("bg-danger"),$("#status_con").html("Disconnected"),addLog({type:"error",msg_id:"",json:t.data})}})});